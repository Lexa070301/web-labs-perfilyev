webpackJsonp([1],{"1QwG":function(t,s){},"7eAl":function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("7+uW"),i=e("trBP"),a=(e("1QwG"),{name:"kanban",components:{DatePicker:i.a},data:function(){return{title:"Канбан",stages:["План","В работе","Готово"],blocks:[],count:{"План":0,"В работе":0,"Готово":0},datetime_start:new Date,datetime_end:new Date,description:"",name:"",status:"План",block_id:0,isChecked:!1}},methods:{updateBlock:function(t,s){this.blocks.find(function(s){return s.id===Number(t)}).status=s,"В работе"==s&&(this.blocks.find(function(s){return s.id===Number(t)}).start_date=new Date),"Готово"==s&&(this.blocks.find(function(s){return s.id===Number(t)}).end_date=new Date),this.count["План"]=0,this.count["В работе"]=0,this.count["Готово"]=0;for(var e=0;e<=this.blocks.length-1;e++)"План"===this.blocks[e].status&&this.count["План"]++,"В работе"===this.blocks[e].status&&this.count["В работе"]++,"Готово"===this.blocks[e].status&&this.count["Готово"]++},delete_card:function(t){t.status="deleted",this.count["План"]=0,this.count["В работе"]=0,this.count["Готово"]=0;for(var s=0;s<=this.blocks.length-1;s++)"План"===this.blocks[s].status&&this.count["План"]++,"В работе"===this.blocks[s].status&&this.count["В работе"]++,"Готово"===this.blocks[s].status&&this.count["Готово"]++},confirm:function(t,s){"План"==t.status?(this.blocks.find(function(t){return t.id===Number(s)}).start_date=new Date,t.status="В работе"):"В работе"==t.status?(this.blocks.find(function(t){return t.id===Number(s)}).end_date=new Date,t.status="Готово"):document.querySelector('.drag-item[data-block-id="'+t.id+'"] .confirm').classList.add("green_confirm"),this.count["План"]=0,this.count["В работе"]=0,this.count["Готово"]=0;for(var e=0;e<=this.blocks.length-1;e++)"План"===this.blocks[e].status&&this.count["План"]++,"В работе"===this.blocks[e].status&&this.count["В работе"]++,"Готово"===this.blocks[e].status&&this.count["Готово"]++},add_card:function(){this.blocks.push({id:this.blocks.length+1,number:this.blocks.length+1,status:"План",description:document.querySelector(".new_description").value,start_date:new Date,end_date:new Date,name:"Alexey"}),document.querySelector(".new_description").value="",this.count["План"]=0,this.count["В работе"]=0,this.count["Готово"]=0;for(var t=0;t<=this.blocks.length-1;t++)"План"===this.blocks[t].status&&this.count["План"]++,"В работе"===this.blocks[t].status&&this.count["В работе"]++,"Готово"===this.blocks[t].status&&this.count["Готово"]++},show:function(t){if(this.$modal.show("card_edit"),this.isChecked){console.log(document.querySelectorAll(".mx-input"));for(var s=0;s<document.querySelectorAll(".mx-input").length;++s)document.querySelectorAll(".mx-input")[s].classList.add("dark_mx-input")}this.status=t.status,this.block_id=t.id,this.description=t.description,this.name=t.name,this.datetime_start=t.start_date,this.datetime_end=t.end_date},hide:function(){this.$modal.hide("card_edit")},apply:function(){"План"==this.status?""!=document.querySelector(".input-description").value?(document.querySelector(".input-description").classList.remove("error"),this.$modal.hide("card_edit"),this.blocks[this.block_id-1].description=this.description,this.blocks[this.block_id-1].status=this.status):document.querySelector(".input-description").classList.add("error"):"В работе"==this.status?""!=document.querySelector(".input-description").value&&null!=this.datetime_start&&""!=document.querySelector(".input-name").value?(this.$modal.hide("card_edit"),this.blocks[this.block_id-1].description=this.description,this.blocks[this.block_id-1].start_date=this.datetime_start,this.blocks[this.block_id-1].name=this.name,this.blocks[this.block_id-1].status=this.status):(""==document.querySelector(".input-description").value?document.querySelector(".input-description").classList.add("error"):document.querySelector(".input-description").classList.remove("error"),null==this.datetime_start?document.querySelector("#input-start-date .mx-input").classList.add("error"):document.querySelector("#input-start-date .mx-input").classList.remove("error"),""==document.querySelector(".input-name").value?document.querySelector(".input-name").classList.add("error"):document.querySelector(".input-name").classList.remove("error")):"Готово"==this.status&&(""!=document.querySelector(".input-description").value&&null!=this.datetime_start&&null!=this.datetime_end&&""!=document.querySelector(".input-name").value?(this.$modal.hide("card_edit"),this.blocks[this.block_id-1].description=this.description,this.blocks[this.block_id-1].start_date=this.datetime_start,this.blocks[this.block_id-1].end_date=this.datetime_end,this.blocks[this.block_id-1].name=this.name,this.blocks[this.block_id-1].status=this.status):(""==document.querySelector(".input-description").value?document.querySelector(".input-description").classList.add("error"):document.querySelector(".input-description").classList.remove("error"),null==this.datetime_start?document.querySelector("#input-start-date .mx-input").classList.add("error"):document.querySelector("#input-start-date .mx-input").classList.remove("error"),null==this.datetime_end?document.querySelector("#input-end-date .mx-input").classList.add("error"):document.querySelector("#input-end-date .mx-input").classList.remove("error"),""==document.querySelector(".input-name").value?document.querySelector(".input-name").classList.add("error"):document.querySelector(".input-name").classList.remove("error"))),this.count["План"]=0,this.count["В работе"]=0,this.count["Готово"]=0;for(var t=0;t<=this.blocks.length-1;t++)"План"===this.blocks[t].status&&this.count["План"]++,"В работе"===this.blocks[t].status&&this.count["В работе"]++,"Готово"===this.blocks[t].status&&this.count["Готово"]++},change_theme:function(){this.isChecked=!this.isChecked,this.isChecked?document.querySelector("body").classList.add("dark_body"):document.querySelector("body").classList.remove("dark_body")}}}),r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"kanban container"},[e("h1",{staticClass:"main__title",class:{dark_main__title:t.isChecked}},[t._v(t._s(t.title))]),t._v(" "),e("label",{staticClass:"theme-label",class:{dark_theme_label:t.isChecked},attrs:{for:"theme"}},[t._v("\n    Тёмная тема:\n    "),e("input",{attrs:{type:"checkbox",id:"theme"},on:{change:t.change_theme}})]),t._v(" "),e("div",{staticClass:"add_new_card"},[e("textarea",{staticClass:"new_description",class:{dark_input:t.isChecked},attrs:{placeholder:"Описание",id:"new_description"}}),t._v(" "),e("button",{staticClass:"add-card",class:{dark_add_card:t.isChecked},on:{click:t.add_card}})]),t._v(" "),e("kanban-board",{class:{dark_kanban:t.isChecked},attrs:{stages:t.stages,blocks:t.blocks},on:{"update-block":t.updateBlock}},[t._l(t.stages,function(s){return e("div",{key:s,attrs:{slot:s},slot:s},[e("h2",{staticClass:"column-title"},[t._v("\n        "+t._s(s+" ("+t.count[s]+")")+"\n      ")])])}),t._v(" "),t._l(t.blocks,function(s){return e("div",{key:s.id,attrs:{slot:s.id},slot:s.id},[e("div",{staticClass:"task-number"},[e("strong",[t._v("Задача №")]),t._v(" "+t._s(s.number)+"\n      ")]),t._v(" "),e("div",{staticClass:"description"},[t._v("\n        "+t._s(s.description)+"\n      ")]),t._v(" "),"В работе"==s.status?e("div",{staticClass:"start_date"},[t._v("\n        Дата начала:\n        "),e("br"),t._v("\n        "+t._s(t._f("formatDate")(s.start_date))+"\n      ")]):t._e(),t._v(" "),"Готово"==s.status?e("div",{staticClass:"end_date"},[t._v("\n        Дата начала:\n        "),e("br"),t._v(" "),e("span",[t._v(t._s(t._f("formatDate")(s.start_date)))]),t._v("\n        Времени потрачено:\n        "),e("br"),t._v("\n        "+t._s(t._f("formatTime")(s.end_date-s.start_date))+"\n      ")]):t._e(),t._v(" "),"В работе"==s.status||"Готово"==s.status?e("div",{staticClass:"name"},[e("span",[t._v("Имя ответственного:")]),t._v(" "),e("br"),t._v("\n        "+t._s(s.name)+"\n      ")]):t._e(),t._v(" "),e("button",{staticClass:"btn close",on:{click:function(e){return t.delete_card(s)}}}),t._v(" "),e("button",{staticClass:"btn edit",on:{click:function(e){return t.show(s)}}}),t._v(" "),e("button",{staticClass:"btn confirm",on:{click:function(e){return t.confirm(s,s.id)}}})])})],2),t._v(" "),null!=t.blocks[0]?e("modal",{attrs:{name:"card_edit"}},[e("button",{staticClass:"close-btn",on:{click:t.hide}}),t._v(" "),e("div",{staticClass:"form",class:{dark_form:t.isChecked},attrs:{id:"form"}},[e("label",{attrs:{for:"input-status"}},[t._v("\n        Статус:\n        "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"input input-status",class:{dark_input_status:t.isChecked},attrs:{id:"input-status"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.status=s.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"План"}},[t._v("План")]),t._v(" "),e("option",{attrs:{value:"В работе"}},[t._v("В работе")]),t._v(" "),e("option",{attrs:{value:"Готово"}},[t._v("Готово")])])]),t._v(" "),e("label",{attrs:{for:"input-description"}},[t._v("\n        Описание:\n        "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"input input-description",class:{dark_new_description:t.isChecked},attrs:{id:"input-description"},domProps:{value:t.description},on:{input:function(s){s.target.composing||(t.description=s.target.value)}}})]),t._v(" "),"В работе"==t.status||"Готово"==t.status?e("label",{attrs:{for:"input-name"}},[t._v("\n        Ответственный:\n        "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input input-name",class:{dark_input:t.isChecked},attrs:{type:"text",id:"input-name"},domProps:{value:t.name},on:{input:function(s){s.target.composing||(t.name=s.target.value)}}})]):t._e(),t._v(" "),"В работе"==t.status||"Готово"==t.status?e("label",{attrs:{for:"input-start-date"}},[t._v("\n        Дата начала:\n        "),e("date-picker",{class:{dark_mx_input:t.isChecked},attrs:{type:"datetime",id:"input-start-date"},model:{value:t.datetime_start,callback:function(s){t.datetime_start=s},expression:"datetime_start"}})],1):t._e(),t._v(" "),"Готово"==t.status?e("label",{attrs:{for:"input-end-date"}},[t._v("\n        Дата окончания:\n        "),e("date-picker",{class:{dark_mx_input:t.isChecked},attrs:{type:"datetime",id:"input-end-date"},model:{value:t.datetime_end,callback:function(s){t.datetime_end=s},expression:"datetime_end"}})],1):t._e(),t._v(" "),e("button",{staticClass:"apply",class:{dark_input:t.isChecked},on:{click:t.apply}},[t._v("Применить")])])]):t._e()],1)},staticRenderFns:[]},o={name:"App",components:{kanban:e("VU/8")(a,r,!1,null,null,null).exports}},c={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("kanban")],1)},staticRenderFns:[]};var u=e("VU/8")(o,c,!1,function(t){e("hj6o")},null,null).exports,d=e("28UY");e("7eAl");n.a.use(d.a);var l=e("PJh5"),h=e.n(l),m=e("rifk"),p=e.n(m);e("e8YG"),e("VaBq");n.a.config.productionTip=!1,n.a.filter("formatDate",function(t){if(t)return h()(String(t)).format("DD.MM.YYYY HH:mm:ss")}),n.a.filter("formatTime",function(t){if(t)return String(h.a.duration(String(t)).days())+" Дней "+String(h.a.duration(String(t)).hours())+" Часов "+String(h.a.duration(String(t)).minutes())+" Минут "+String(h.a.duration(String(t)).seconds())+" Секунд"}),n.a.use(p.a),new n.a({el:"#app",components:{App:u},template:"<App/>"})},VaBq:function(t,s){},e8YG:function(t,s){},hj6o:function(t,s){},uslO:function(t,s,e){var n={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-in":"yJfC","./en-in.js":"yJfC","./en-nz":"dyB6","./en-nz.js":"dyB6","./en-sg":"NYST","./en-sg.js":"NYST","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fil":"rMbQ","./fil.js":"rMbQ","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-deva":"VGQH","./gom-deva.js":"VGQH","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./oc-lnc":"KOFO","./oc-lnc.js":"KOFO","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-mo":"+WA1","./zh-mo.js":"+WA1","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return e(a(t))}function a(t){var s=n[t];if(!(s+1))throw new Error("Cannot find module '"+t+"'.");return s}i.keys=function(){return Object.keys(n)},i.resolve=a,t.exports=i,i.id="uslO"},zicj:function(t,s,e){"use strict";var n=e("gRE1"),i=e.n(n),a=e("fZjL"),r=e.n(a),o=e("vx8o"),c=e.n(o),u=e("FbZO"),d={name:"KanbanBoard",props:{stages:{type:Array,required:!0},blocks:{type:Array,required:!0},config:{type:Object,default:function(){return{}}},stateMachineConfig:{type:Object,default:null}},data:function(){return{machine:null}},computed:{localBlocks:function(){return this.blocks}},methods:{getBlocks:function(t){return this.localBlocks.filter(function(s){return s.status===t})},findPossibleTransitions:function(t){return this.machine.config.states[t].on||{}},findTransition:function(t,s){var e=t.dataset.status,n=s.dataset.status,i=this.findPossibleTransitions(n);return r()(i).find(function(t){return i[t]===e})},accepts:function(t,s,e){if(!this.machine)return!0;var n=s.dataset.status,a=e.dataset.status;return i()(this.findPossibleTransitions(a)).includes(n)}},updated:function(){this.drake.containers=this.$refs.list},mounted:function(){var t=this;this.config.accepts=this.config.accepts||this.accepts,this.drake=c()(this.$refs.list,this.config).on("drag",function(t){t.classList.add("is-moving")}).on("drop",function(s,e,n){var i=0;for(i=0;i<e.children.length&&!e.children[i].classList.contains("is-moving");i+=1);var a=e.dataset.status;if(t.machine){var r=t.findTransition(e,n);if(!r)return;a=t.machine.transition(n.dataset.status,r).value}t.$emit("update-block",s.dataset.blockId,a,i)}).on("dragend",function(t){t.classList.remove("is-moving"),window.setTimeout(function(){t.classList.add("is-moved"),window.setTimeout(function(){t.classList.remove("is-moved")},600)},100)})},created:function(){this.stateMachineConfig&&(this.machine=Object(u.a)(this.stateMachineConfig))}},l={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"drag-container"},[e("ul",{staticClass:"drag-list"},t._l(t.stages,function(s){var n;return e("li",{key:s,staticClass:"drag-column",class:(n={},n["drag-column-"+s]=!0,n)},[e("span",{staticClass:"drag-column-header"},[t._t(s,[e("h2",[t._v(t._s(s))])])],2),t._v(" "),e("div",{staticClass:"drag-options"}),t._v(" "),e("ul",{ref:"list",refInFor:!0,staticClass:"drag-inner-list",attrs:{"data-status":s}},t._l(t.getBlocks(s),function(s){return e("li",{key:s.id,staticClass:"drag-item",attrs:{"data-block-id":s.id}},[t._t(s.id,[e("strong",[t._v(t._s(s.status))]),t._v(" "),e("div",[t._v(t._s(s.id))])])],2)}),0),t._v(" "),e("div",{staticClass:"drag-column-footer"},[t._t("footer-"+s)],2)])}),0)])},staticRenderFns:[]},h=e("VU/8")(d,l,!1,null,null,null);s.a=h.exports}},["NHnr"]);
//# sourceMappingURL=app.d74b716d5613e30faa70.js.map